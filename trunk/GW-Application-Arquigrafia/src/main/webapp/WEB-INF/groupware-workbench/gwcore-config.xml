<?xml version="1.0" encoding="UTF-8"?>
<frameworkDescriptor>

    <!-- Configuração do hibernate, tem o mesmo formato do persistence.xml. -->
    <hibernate>
        <property name="hibernate.connection.username" value="groupwareUser" />
        <property name="hibernate.connection.password" value="102938" />
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/groupware_workbench_arquigrafia" />
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="transaction.factory_class" value="org.hibernate.transaction.JDBCTransactionFactory" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
    </hibernate>

    <initialCollablet>photoMgr</initialCollablet>

    <collablets>
        <collablet>
            <business>br.org.groupwareworkbench.collablet.coord.management.ApplicationInstance</business>
            <description>Gerenciar aplicação</description>
            <name>manager</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.communic.comment.CommentMgrInstance</business>
            <description>Gerenciar comentários</description>
            <name>commentMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.communic.georeference.GeoReferenceMgrInstance</business>
            <description>Gerenciar Google Maps</description>
            <name>geoReferenceMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.communic.tag.TagMgrInstance</business>
            <description>Gerenciar tags</description>
            <name>tagMgr</name>
        </collablet>

        <!--<collablet>
            <business>br.org.groupwareworkbench.collablet.communic.upload.UploadMgrInstance</business>
            <description>Gerenciar upload</description>
            <name>uploadMgr</name>
        </collablet>-->

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coop.binomial.BinomialMgrInstance</business>
            <description>Gerenciar binômios</description>
            <name>binomialMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coop.rating.RatingMgrInstance</business>
            <description>Gerenciar avaliação</description>
            <name>ratingMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coord.profile.ProfileMgrInstance</business>
            <description>Gerenciar perfis</description>
            <name>profileMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coord.role.RoleMgrInstance</business>
            <description>Gerenciar papéis</description>
            <name>roleMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coord.user.UserMgrInstance</business>
            <description>Gerenciar usuários</description>
            <name>userMgr</name>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.arquigrafia.photo.PhotoMgrInstance</business>
            <description>Registro de fotografias</description>
            <name>photoMgr</name>
            <properties>
                <property key="dirImages" value="images/" /> 
                <!--
                    No linux se não usa absolute path assume-se $HOME como prefixo, ou seja "images/" ficará "$HOME/images"
                    se tiver permissões esta pasta é criada automaticamente pelo componente.
                -->
            </properties>
        </collablet>

        <collablet>
            <business>br.org.groupwareworkbench.collablet.coord.friends.FriendsMgrInstance</business>
            <description>Gerenciar amigos</description>
            <name>friendsMgr</name>
        </collablet>

        <!--<collablet>
            <business>br.org.groupwareworkbench.collablet.coop.album.AlbumMgrInstance</business>
            <description>Gerenciar Albuns</description>
            <name>albumMgr</name>
        </collablet> -->
        
        <collablet>
            <business>br.org.groupwareworkbench.collablet.communic.comment.CommentMgrInstance</business>
            <description>Gerenciar comentários</description>
            <name>commentMgr2</name>
        </collablet>

    </collablets>

    <collablets-subordinations>
        <subordination parent="photoMgr" child="manager" />
        <subordination parent="photoMgr" child="userMgr" />
        <subordination parent="photoMgr" child="binomialMgr" />
        <subordination parent="photoMgr" child="geoReferenceMgr" />
        <subordination parent="photoMgr" child="tagMgr" />
        <subordination parent="photoMgr" child="friendsMgr" />        
        <!-- <subordination parent="photoMgr" child="albumMgr" /> -->
        <subordination parent="photoMgr" child="commentMgr" />
        <subordination parent="photoMgr" child="commentMgr2" />
<!--        <subordination parent="friendsMgr" child="commentMgr2" />-->
    </collablets-subordinations>

    <collablets-dependencies>
        <dependency from="roleMgr" to="userMgr" />
        <dependency from="profileMgr" to="userMgr" />
        <dependency from="commentMgr2" to="friendsMgr" />
        <dependency from="commentMgr" to="photoMgr" />
        <dependency from="geoReferenceMgr" to="photoMgr" />
        <dependency from="tagMgr" to="photoMgr" />
        <dependency from="photoMgr" to="tagMgr" />
        <!--<dependency from="uploadMgr" to="photoMgr" />-->
        <dependency from="binomialMgr" to="photoMgr" />
        <dependency from="ratingMgr" to="photoMgr" />
        <dependency from="profileMgr" to="photoMgr" />
        <dependency from="profileMgr" to="friendsMgr" />
        <dependency from="roleMgr" to="photoMgr" />
        <dependency from="userMgr" to="photoMgr" />
        <dependency from="userMgr" to="photoMgr" alias="--login--" />
        <dependency from="friendsMgr" to="photoMgr" />
        <dependency from="commentMgr2" to="photoMgr" />
        <dependency from="userMgr" to="friendsMgr" />
        <!-- <dependency from="albumMgr" to="photoMgr" /> -->
        <dependency from="manager" to="photoMgr" />
    </collablets-dependencies>
</frameworkDescriptor>
